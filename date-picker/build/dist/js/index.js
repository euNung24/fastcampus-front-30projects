var o=Object.defineProperty;var d=(i,t,e)=>t in i?o(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var a=(i,t,e)=>(d(i,typeof t!="symbol"?t+"":t,e),e);class DatePicker{constructor(){a(this,"wrapperEl");a(this,"dateInputEl");a(this,"calenderEl");a(this,"monthEl");a(this,"monthContentEl");a(this,"prevMonthBtnEl");a(this,"nextMonthBtnEl");a(this,"dateEl");a(this,"monthData",["January","February","March","April","May","June","July","August","September","October","November","December"]);a(this,"calendarData",{data:"",year:0,month:0,date:0});a(this,"selectedData",{data:"",year:0,month:0,date:0});this.initCalendarDate(),this.initSelectedDate(),this.setElements(),this.initCalendarData(),this.setEvents()}initCalendarDate(){const t=new Date,e=t.getFullYear(),s=t.getMonth(),n=t.getDate();this.calendarData={data:t,year:e,month:s,date:n}}initSelectedDate(){this.selectedData={...this.calendarData}}setElements(){this.wrapperEl=document.querySelector(".date-picker-wrapper"),this.dateInputEl=this.wrapperEl.querySelector(".date-picker-input"),this.calenderEl=this.wrapperEl.querySelector(".calendar-wrapper"),this.monthEl=this.calenderEl.querySelector(".month"),this.monthContentEl=this.monthEl.querySelector(".content"),this.prevMonthBtnEl=this.monthEl.querySelector(".btn-prev"),this.nextMonthBtnEl=this.monthEl.querySelector(".btn-next"),this.dateEl=this.calenderEl.querySelector(".dates")}setEvents(){this.dateInputEl.addEventListener("click",this.toggleCalendar.bind(this)),this.prevMonthBtnEl.addEventListener("click",this.moveToPrevMonth.bind(this)),this.nextMonthBtnEl.addEventListener("click",this.moveToNextMonth.bind(this)),this.dateEl.addEventListener("click",this.onClickSelectDate.bind(this))}toggleCalendar(){this.calenderEl.classList.contains("show")&&(this.calendarData={...this.selectedData}),this.calenderEl.classList.toggle("show"),this.updateMonth(),this.updateDates()}moveToPrevMonth(){this.calendarData.month--,this.calendarData.month<0&&(this.calendarData.month=11,this.calendarData.year--),this.updateMonth(),this.updateDates()}moveToNextMonth(){this.calendarData.month++,this.calendarData.month>11&&(this.calendarData.month=0,this.calendarData.year++),this.updateMonth(),this.updateDates()}genTwoDigitNum(t){return t.toString().padStart(2,"0")}initCalendarData(){this.setCalendarInput(),this.updateMonth(),this.updateDates()}setCalendarInput(){this.dateInputEl.innerHTML=`${this.selectedData.year}/${this.genTwoDigitNum(this.selectedData.month+1)}/${this.genTwoDigitNum(this.selectedData.date)}`}updateMonth(){this.monthContentEl.innerHTML=`${this.calendarData.year} ${this.monthData[this.calendarData.month]}`}updateDates(){this.dateEl.innerHTML="";const{year:t,month:e}=this.calendarData,s=new Date(t,e+1,0).getDate(),n=new Date(t,e,1).getDay(),r=document.createDocumentFragment();for(let l=0;l<s;l++){const h=document.createElement("span");h.dataset.date=(l+1).toString(),h.textContent=(l+1).toString(),r.appendChild(h)}this.dateEl.appendChild(r),this.dateEl.firstElementChild.style.gridColumnStart=(n+1).toString(),[...this.dateEl.querySelectorAll(`span:nth-child(7n + ${7-n})`)].forEach(l=>l.style.color="blue"),[...this.dateEl.querySelectorAll(`span:nth-child(7n + ${(8-n)%7})`)].forEach(l=>l.style.color="red"),this.colorToday(),this.colorSelectedDay()}colorToday(){const t=new Date,e=t.getFullYear(),s=t.getMonth(),n=t.getDate();e===this.calendarData.year&&s===this.calendarData.month&&this.dateEl.querySelector(`[data-date="${n}"]`).classList.add("today")}onClickSelectDate(t){const e=this.calendarData.year,s=this.calendarData.month,n=t.target.dataset.date||1;this.selectedData={data:new Date(e,s,n),year:e,month:s,date:n},this.colorSelectedDay(),this.setCalendarInput(),this.calenderEl.classList.remove("show")}colorSelectedDay(){this.selectedData.year===this.calendarData.year&&this.selectedData.month===this.calendarData.month&&(this.dateEl.querySelector(".select")?.classList.remove("select"),this.dateEl.querySelector(`[data-date="${this.selectedData.date}"]`).classList.add("select"))}}new DatePicker;
